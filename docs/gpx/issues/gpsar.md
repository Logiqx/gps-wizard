## GPS Exchange Format (GPX) - GpsarPro

### GPX 1.0

The header is fine, except there is no schema location for the "gpsarPro" namespace.

```xml
<gpx creator="GpsarPro 5.3"
     version="1.0"
     xmlns="http://www.topografix.com/GPX/1/0"
     xmlns:gpsarPro="http://www.gpsactionreplay.com/xml"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://www.topografix.com/GPX/1/0 http://www.topografix.com/GPX/1/0/gpx.xsd">
```



### Speed and Course

GpsarPro supports the "speed" element of GPX 1.0 but it does not support not "course".

Supports the non-standard "gpxdata:speed" introduced by the Kickstarter [Trace](https://www.kickstarter.com/projects/activereplay/trace-the-most-advanced-activity-monitor-for-actio) and used by [Waterspeed](https://waterspeedapp.com/).

Does not support GPX 1.1 + Trackpoint Extension v2 for "course" and "speed". See [document](../speed.md) for details.



### Element Order

The order of the elements does not conform to the schema definition:

```xml
<trkpt lat="52.0488357" lon="-0.56904">
  <ele>100.36</ele>
  <time>2022-08-02T10:35:28Z</time>
  <speed>0.16</speed>
  <hdop>3.8</hdop>
  <sat>5</sat>
</trkpt>
```

The correct order is shown below:

```xml
<trkpt lat="52.0488357" lon="-0.56904">
  <ele>100.36</ele>
  <time>2022-08-02T10:35:28Z</time>
  <speed>0.16</speed>
  <sat>5</sat>
  <hdop>3.8</hdop>
</trkpt>
```

"course" is also absent and could be exported. The "course" element should appear immediately before "speed".



### Invalid Elements

GPX exports from GpsarPro include a "color" element:

```xml
<color>-65536</color>
```

This is not part of the GPX schema so it should be added to a dedicated schema and namespace.



### Extensions

GPX files generated by gpsarPro makes use of elements belonging to a dedicated schema:

```xml
<gpsarPro:satsInView>70254721</gpsarPro:satsInView>
<gpsarPro:nGPS>1</gpsarPro:nGPS>
<gpsarPro:maxNoDataDuration>60000</gpsarPro:maxNoDataDuration>
<gpsarPro:annotations></gpsarPro:annotations>
```

However, without a suitable XSD available online and specified in xsi:schemaLocation it is impossible to validate the GPX.



### Recommendations

- Upload a suitable XSD to http://www.gpsactionreplay.com/ and include it in xsi:schemaLocation.
  - Add "color" to the GpsarPro schema and rename the "color" elements to "gpsarPro:color" in the GPX.
  - Note: These extensions will almost certainly require the use of GPX 1.1 which adds complications, especially for speed.
- Enhance GPX export to include `<course>`.
- Enhance GPX export to use the element order prescribed by the GPX schema - "ele", "time", "course", "speed", "sat", hdop".
- Enhance GPX loader to recognize `<course>` (GPX 1.0) and `<cog>` (existing COROS files).
- Enhance GPX loader to support GPX 1.1 + Trackpoint Extension v2 for `<xxx:course>` and `<xxx:speed>`. See [document](../speed.md) for details.
