## GPS Exchange Format (GPX) - COROS

### GPX 1.0

GPX files generated by COROS appear to use the GPX 1.0 schema:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<gpx creator="Coros Wearables"
     xmlns="http://www.topografix.com/GPX/1/0"
     xmlns:gpxdata="http://www.cluetrust.com/XML/GPXDATA/1/0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://www.topografix.com/GPX/1/0 http://www.topografix.com/GPX/1/0/gpx.xsd
                         http://www.cluetrust.com/XML/GPXDATA/1/0 http://www.cluetrust.com/Schemas/gpxdata10.xsd">
```

Issues with the header:

- The "version" attribute is missing which should be `version="1.0"`.
- The ClueTrust GPXData is for GPX 1.1, making xmlns:gpxdata and the schema location invalid as well.



### Incorrect Elements

The following elements are incorrectly named in COROS files:

- `<cog>` elements instead of `<course>`.
- `<heartrate>` elements instead of `<hr>.`

Notes:

- Course over ground is called "course" in [GPX 1.0](https://www.topografix.com/GPX/1/0/gpx.xsd) and [GPX 1.1](https://www.topografix.com/GPX/1/1/gpx.xsd).
- Heartrate is called "hr" in ClueTrust [GPXData](http://www.cluetrust.com/Schemas/gpxdata10.xsd) and Garmin [TrackPointExtension](http://www.garmin.com/xmlschemas/TrackPointExtensionv2.xsd).



### Invalid Elements

COROS files include "metadata" which is not supported by GPX 1.0:

```xml
  <metadata>
    <time>2022-04-04T12:41:30Z</time>
  </metadata>
```

The track also include a "type" element which is not supported by GPX 1.0:

```xml
  <trk>
    <name>Lidlington Speedsurfing</name>
    <type>Other</type>
    <trkseg>
     ...
```

Both "metadata" and "type" need to be removed if the file is to GPX 1.0 compliant.



### Missing Elements

The following elements could be added to trackpoints:

- Elevation (m) - `<ele>`
- Speed (m/s) - `<speed>`

Elevation is available in GPX 1.0 and GPX 1.1, whereas speed is only available in GPX 1.0.



### Extensions

The following extensions are used within COROS files:


```xml
<extensions>
  <heartrate>100</heartrate>
  <distance>7</distance>
</extensions>
```

To be GPX compliant they must use the appropriate prefix and the correct element name:

```xml
<extensions>
  <gpxdata:hr>100</gpxdata:hr>
  <gpxdata:distance>7</gpxdata:distance>
</extensions>
```

However, GPX 1.0 does not support extensions so this is not sufficient of GPX 1.0 compliance.

There are really only two options:

1) Stick to GPX 1.0 by removing "extensions" elements ("hr" and "distance") and remove "GPXDATA" references from the GPX header.
2) Switch to GPX 1.1 but be sure to generate the appropriate "speed" elements as described in a dedicated [document](../speed.md).



### Recommendations

The ideal scenario is to use GPX 1.0 as it is most widely supported by software in the GPS-Speedsurfing world.

If COROS is has good reasons to use GPX 1.1 (e.g. shared code with other activities) then extensions will be required for [speed](../speed.md) to be recorded. 



#### GPX 1.0

If the file is to be [GPX 1.0](https://www.topografix.com/GPX/1/0/gpx.xsd) compliant then do the following:

- Add `version="1.0"` to the `<gpx>` element.
- Remove the "GPXDATA" references from the header; xmlns:gpxdata and the location of gpxdata10.xsd.
- Rename the `<cog>`elements  to `<course>.`
- Add `<ele>` to the `<trkpt>` elements.
- Add `<speed>` to the `<trkpt>` elements.
- Ensure the element order mandated by the GPX 1.0 schema - “ele”, “time”, “course”, “speed”, “sat”, hdop”.
- Remove the `<metadata>` element.
- Remove the `<type>` element from the `<trk>` element.
- Remove the `<extensions>` from the `<trkpt>` elements (i.e. remove heartrate and distance).



#### GPX 1.1

If the file is to be [GPX 1.1](https://www.topografix.com/GPX/1/1/gpx.xsd) compliant then do the following:

- Add `version="1.1"` to the `<gpx>` element.
- Add `<ele>` to the `<trkpt>` elements.
- Add `<speed>` to the extensions, specifying the namespace as described in the dedicated [document](../speed.md).
- Rename `<cog>` to `<course>` and move it into extensions in the same way as "speed".
- Ensure the element order mandated by the GPX 1.1 schema - “ele”, “time”, “sat”, hdop”.
- Rename `<heartrate>` to `<gpxdata:hr>`
- Rename `<distance>` to `<gpxdata:distance>`
